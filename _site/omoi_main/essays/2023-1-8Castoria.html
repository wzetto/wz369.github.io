<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="shortcut icon" type="image/png" href="https://wzetto.github.io/wz369.github.io/images/icon/sideicon192.png">
    <link rel="shortcut icon" sizes="192x192" href="https://wzetto.github.io/wz369.github.io/images/icon/sideicon192.png">
    <link rel="apple-touch-icon" href="https://wzetto.github.io/wz369.github.io/images/icon/sideicon192.png">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=cfe0696a4f604aaa79f27fc4ea1cda9f54a98c00">
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>2023.1.8 | wz369.github.io.git</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="2023.1.8" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/omoi_main/essays/2023-1-8Castoria.html" />
<meta property="og:url" content="http://localhost:4000/omoi_main/essays/2023-1-8Castoria.html" />
<meta property="og:site_name" content="wz369.github.io.git" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="2023.1.8" />
<script type="application/ld+json">
{"headline":"2023.1.8","@type":"WebPage","url":"http://localhost:4000/omoi_main/essays/2023-1-8Castoria.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>

  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js"></script>
<script>
const config = {
    startOnLoad:true,
    theme: 'forest',
    flowchart: {
        useMaxWidth:false,
        htmlLabels:true
        }
};
mermaid.initialize(config);
window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>

    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    
    <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
    </script>
    <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script>
    <script type="text/x-mathjax-config">
       MathJax.Hub.Config({
         tex2jax: {
           inlineMath: [ ['$','$'], ["\\(","\\)"] ],
           processEscapes: true
         }
       });
    </script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <!-- HEADER -->
    <div id="header_pages" class="outer">
        <header class="inner_top background_img_formal">
          
          <!-- 
            <a id="forkme_banner" href="https://github.com/wzetto/wz369.github.io.git">View on GitHub</a>
           -->
          <a href="https://wzetto.github.io/wz369.github.io/"></a>
          
          <h1 id="project_title">2023.1.8</h1>
          
          
         
          
        </header>
    </div>
    
    <script src="https://wzetto.github.io/wz369.github.io/js/header/header_scroll_formal.js"></script>
    
    <!-- MAIN CONTENT -->
    <button onclick="topFunction()" id="back_top" title="Back to top">TOP</button>
    <script src="https://wzetto.github.io/wz369.github.io/js/BackTop/bt_1.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <div class="row">
      <div class="inner_left">

        

        <p><a href="https://github.com/wzetto/projLite-/blob/main/Hist_matching/try1.ipynb">&lt;code&gt;</a></p>

<p>从网络搞到了C100的キャストリア百面相扫描，颜色不太对：</p>

<h3 id="扫描图img_raw--type-moon官方图img_ref">扫描图img_raw + Type moon官方图img_ref</h3>

<p><img src="https://drive.google.com/thumbnail?id=11PLOhC2jiYC9eGHZ3sh3iDd6ZwCZGu0q&amp;sz=w800" width="600px" /></p>
<hr style="width:50px;text-align:left;margin-left:0" />

<p>故调下色，分为：</p>
<ul>
  <li>Denoise+Cutout</li>
</ul>

<p>降噪用opencv的<code class="language-plaintext highlighter-rouge">fastNlMeansDenoisingColored</code>函数；cutout用<code class="language-plaintext highlighter-rouge">rembg</code>包体。</p>

<ul>
  <li>
    <p>随后用opencv的直方图均衡，直方图匹配用numpy实现，因定义在RGB色域上对img_ref的变换满足$\Gamma(img_ref) = \sum_0^{255} P_{img_ref}(w) \geq \sum_0^{255} P_{raw}(w)$，故可简化为<code class="language-plaintext highlighter-rouge">np.intep</code>对ref图与raw图的RGB通道上的累计分布函数做插值实现匹配。</p>
  </li>
  <li>
    <p>最后二次降噪及改变背景alpha=0得到完成图，效果如下：</p>
  </li>
</ul>

<h3 id="后处理扫描图--type-moon官方图">后处理扫描图 + Type moon官方图</h3>

<p><img src="https://drive.google.com/thumbnail?id=18ljGsd9x_AKCHAHxtvmNnADKuq6-8Tkr&amp;sz=w800" width="600px" /></p>
<hr style="width:50px;text-align:left;margin-left:0" />

<h3 id="-back"><a href="https://wzetto.github.io/wz369.github.io/omoi_main/omoi.html">&lt; back</a></h3>

<script>
  window.onload = function(){
    let txt = document.getElementById("side_text");
    txt.innerHTML = "ここすき";
  }
</script>

<br>
        <div id="gitalk-container"></div>
        <script>
          var gitalk = new Gitalk({
              clientID: '7b560b97e4bda87153dd',
              clientSecret: '71c1745a9c776d439e0de7e8712c4c90a7441709',
              repo: 'gitalk-cobuffer',
              owner: 'wzetto',
              admin: ['wzetto'],
              id: '2023.1.8',
              distractionFreeMode: false,
              title: 'Omoi'
          })
          gitalk.render('gitalk-container')
        </script>
        <p style="text-align: center;">
          <img src="https://drive.google.com/thumbnail?id=1hcY5U4qLbe6QHDNCK6wzERxcDnTxm0Dp&sz=w800" width="200px"/>
        </p>
        <h6 align='center'>Zhi Wang © 2021-2023</h6>
      </div>
      <div class="inner_right">
        <h5 id="side_text">> Main content</h5>
      </div>
     </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner_bottom">
        
        <p class="copyright">wz369.github.io.git maintained by <a href="https://github.com/wzetto">wzetto</a></p>
        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
        <!-- <p style="position: absolute; bottom: 0; width:100%; text-align: center">有り得ざる妖精の王よ——</p>
        -->
        <p id='bottom_text'>冬の玉座は誰の手に</p>
        <!-- <script src="https://wzetto.github.io/wz369.github.io/js/bottom/bottom_text_home.js"></script>-->
      </footer>
    </div>
  </body>
</html>
